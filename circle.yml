machine:
  node:
    version: 9.3.0
test:
  post:
    - sh release.sh
  override:
    - npm run build && npm test
    - sh ./common/e2e.sh
checkout:
  post:
    - git submodule init
    - git submodule update
deployment:
  deploy:
    branch: master
    commands:
      - npm run doc
      - >-
        aws s3 cp ./docs/ s3://api.grimoire.gl/$CIRCLE_PROJECT_REPONAME
        --recursive --acl public-read
